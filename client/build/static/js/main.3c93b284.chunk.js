(this.webpackJsonpQandA=this.webpackJsonpQandA||[]).push([[0],{15:function(e,t,n){e.exports=n(27)},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),s=n.n(o),u=n(7),i=n.n(u),c=n(9),l=n(2),p=n(3),h=n(5),m=n(4),f=n(6),d=n(1),b=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.data.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(d.a,{to:"/question/"+e._id},e.title))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,e),r.a.createElement(d.a,{to:"/Ask-a-question"},"Ask a question"))}}]),t}(a.Component),v=n(10),g=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={answer:""},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"onChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(){this.props.submit(this.state.answer)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",placeholder:"Your answer",name:"answer",onChange:function(t){return e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(t){return e.onSubmit()}},"Add Answer"),r.a.createElement("br",null))}}]),t}(a.Component),y=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"upVote",value:function(e,t){var n=t.answers.find((function(t){return t._id===e})),a=n.vote+1;console.log(e,"Downvoted",n,a),this.props.putVote(t._id,n,a)}},{key:"downVote",value:function(e,t){var n=t.answers.find((function(t){return t._id===e})),a=n.vote-1;console.log(e,"Downvoted",n,a),this.props.putVote(t._id,n,a)}},{key:"addAnswer",value:function(e,t){var n={text:e,vote:0};this.props.postAnswer(t._id,n)}},{key:"render",value:function(){var e=this,t=this.props.getQuestion(this.props.id),n=t.answers.map((function(n,a){return r.a.createElement("li",{key:a},n.text,r.a.createElement("button",{onClick:function(){return e.upVote(n._id,t)},style:{marginLeft:"2vw"}},"Up"),r.a.createElement("span",{style:{margin:"0 2vw"}},n.vote),r.a.createElement("button",{onClick:function(){return e.downVote(n._id,t)}},"Down"))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,t.title),r.a.createElement("h3",null,"Answers:"),r.a.createElement("ul",null,n),r.a.createElement(g,{path:"/",submit:function(n){return e.addAnswer(n,t)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.a,{to:"/"},"Back to questions"))}}]),t}(a.Component),E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={title:""},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"onChange",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(){this.props.submit(this.state.title)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Ask questions"),r.a.createElement("input",{type:"text",placeholder:"Your question",name:"title",onChange:function(t){return e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement(d.a,{to:"/"},r.a.createElement("button",{onClick:function(t){return e.onSubmit()}},"Add question")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.a,{to:"/"}," Go back"))}}]),t}(a.Component),j=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={questions:[]},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/questions",e.next=3,fetch("/api/questions");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,this.setState({questions:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addQuestion",value:function(e){var t={title:e,answers:[]};this.postQuestion(t)}},{key:"getQuestion",value:function(e){return this.state.questions.find((function(t){return t._id===e}))}},{key:"postAnswer",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var a,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("postAnswer",t,n),a="/api/question/".concat(t,"/answers"),e.next=4,fetch(a,{headers:{"Content-type":"application/json"},method:"POST",body:JSON.stringify({answer:n})});case 4:return r=e.sent,e.next=7,r.json();case 7:o=e.sent,console.log("Printing the response",o),this.getData();case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"postQuestion",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("postQuestion",t),"/api/question",e.next=4,fetch("/api/question",{headers:{"Content-type":"application/json"},method:"POST",body:JSON.stringify({question:t})});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,console.log("Printing the response",a),this.getData();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"putVote",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,a){var r,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("PutVote",n,a),r=n._id,o="/api/question/".concat(t,"/answers/").concat(r),e.next=5,fetch(o,{headers:{"Content-type":"application/json"},method:"PUT",body:JSON.stringify({vote:a})});case 5:return s=e.sent,e.next=8,s.json();case 8:u=e.sent,console.log("Putting the response",u),this.getData();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Question and answers app"),r.a.createElement(d.b,null,r.a.createElement(b,{path:"/",data:this.state.questions}),r.a.createElement(y,{path:"/question/:id",getQuestion:function(t){return e.getQuestion(t)},postAnswer:function(t,n){return e.postAnswer(t,n)},putVote:function(t,n,a){return e.putVote(t,n,a)}}),r.a.createElement(E,{path:"/Ask-a-question",submit:function(t){return e.addQuestion(t)}})),r.a.createElement("div",null))}}]),t}(a.Component);s.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.3c93b284.chunk.js.map